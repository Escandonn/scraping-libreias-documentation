### Introducción a Page Objects

El patrón de diseño "Page Objects" es una técnica utilizada en la automatización de pruebas de aplicaciones web para estructurar el código y hacerlo más mantenible y legible. En este patrón, cada página o parte de la interfaz de usuario (UI) de la aplicación se representa mediante un objeto, lo que facilita la interacción con los elementos de la página y reduce el duplicado de código. La idea es abstraer las interacciones con la interfaz y centralizar el manejo de los elementos en clases dedicadas. 

### Beneficios del uso del patrón Page Objects

1. **Facilidad de lectura en los casos de prueba**: Al usar Page Objects, el código de las pruebas se enfoca más en la lógica del caso de prueba en lugar de los detalles técnicos de la interacción con la interfaz.

2. **Código reutilizable**: Las acciones definidas en los Page Objects se pueden utilizar en múltiples casos de prueba, evitando la duplicación.

3. **Reducción del código duplicado**: Las funciones comunes que interactúan con la página (como hacer clic en un botón o rellenar un campo) se definen una sola vez.

4. **Facilidad de mantenimiento**: Si la interfaz de usuario cambia, solo se necesita actualizar el código en un lugar (en el Page Object correspondiente) en lugar de modificar múltiples casos de prueba.

### Ejemplo práctico de implementación de Page Objects

Vamos a implementar un ejemplo en el que se realiza una búsqueda en la página de Python.org y se valida que los resultados sean mostrados. El proyecto estará dividido en cuatro componentes principales:

1. **Caso de prueba**: Define los pasos específicos de la prueba.
2. **Clases de objetos de página**: Abstraen las acciones que se pueden realizar en cada página.
3. **Elementos de página**: Representan los elementos individuales de la interfaz con los que se interactúa (campos de texto, botones, etc.).
4. **Localizadores**: Separan los identificadores de los elementos para centralizar su gestión.

#### Paso 1: Caso de prueba

```python
import unittest
from selenium import webdriver
import page  # Importa las clases de Page Objects

class PythonOrgSearch(unittest.TestCase):
    """Clase de prueba para demostrar cómo funciona el patrón Page Object"""

    def setUp(self):
        # Inicializa el navegador y carga la página web
        self.driver = webdriver.Firefox()
        self.driver.get("http://www.python.org")

    def test_search_in_python_org(self):
        """Prueba la funcionalidad de búsqueda en python.org buscando la palabra 'pycon'"""

        # Carga la página principal
        main_page = page.MainPage(self.driver)
        # Verifica que el título contenga "Python"
        self.assertTrue(main_page.is_title_matches(), "El título de la página no coincide.")
        # Realiza la búsqueda de "pycon"
        main_page.search_text_element = "pycon"
        main_page.click_go_button()
        # Valida que la página de resultados no esté vacía
        search_results_page = page.SearchResultsPage(self.driver)
        self.assertTrue(search_results_page.is_results_found(), "No se encontraron resultados.")

    def tearDown(self):
        # Cierra el navegador
        self.driver.close()

if __name__ == "__main__":
    unittest.main()
```

#### Paso 2: Clases de objetos de página (page.py)

El archivo `page.py` contiene clases que representan la estructura de las páginas.

```python
from element import BasePageElement
from locators import MainPageLocators

class SearchTextElement(BasePageElement):
    """Clase para interactuar con el campo de búsqueda"""

    # Identificador del campo de búsqueda
    locator = 'q'

class BasePage(object):
    """Clase base para inicializar la página base, que se extenderá por todas las páginas"""

    def __init__(self, driver):
        self.driver = driver

class MainPage(BasePage):
    """Acciones disponibles en la página principal"""

    # Define el elemento de búsqueda
    search_text_element = SearchTextElement()

    def is_title_matches(self):
        """Verifica que el título de la página contenga 'Python'"""
        return "Python" in self.driver.title

    def click_go_button(self):
        """Hace clic en el botón de búsqueda"""
        element = self.driver.find_element(*MainPageLocators.GO_BUTTON)
        element.click()

class SearchResultsPage(BasePage):
    """Acciones disponibles en la página de resultados de búsqueda"""

    def is_results_found(self):
        # Comprueba si la página de resultados no está vacía
        return "No results found." not in self.driver.page_source
```

#### Paso 3: Definición de elementos (element.py)

Este archivo contiene clases que representan los elementos individuales.

```python
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait

class BasePageElement(object):
    """Clase base para representar un elemento en la página"""

    def __set__(self, obj, value):
        """Establece el valor del elemento"""
        driver = obj.driver
        WebDriverWait(driver, 100).until(
            lambda driver: driver.find_element(By.NAME, self.locator))
        driver.find_element(By.NAME, self.locator).clear()
        driver.find_element(By.NAME, self.locator).send_keys(value)

    def __get__(self, obj, owner):
        """Obtiene el valor del elemento"""
        driver = obj.driver
        WebDriverWait(driver, 100).until(
            lambda driver: driver.find_element(By.NAME, self.locator))
        element = driver.find_element(By.NAME, self.locator)
        return element.get_attribute("value")
```

#### Paso 4: Definición de localizadores (locators.py)

Los localizadores son utilizados para identificar los elementos en la página.

```python
from selenium.webdriver.common.by import By

class MainPageLocators(object):
    """Localizadores de la página principal"""

    GO_BUTTON = (By.ID, 'submit')  # Identificador del botón de búsqueda
```

### Conclusión

El patrón Page Objects es una práctica recomendada para la automatización de pruebas de aplicaciones web. Facilita la lectura del código, promueve la reutilización y simplifica el mantenimiento cuando la interfaz de usuario cambia. Este ejemplo demuestra cómo estructurar un proyecto de pruebas con Page Objects en Selenium, abarcando desde la teoría hasta la implementación práctica.